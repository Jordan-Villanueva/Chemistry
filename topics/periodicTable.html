<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configuraciones Electr√≥nicas - 118 Elementos</title>
<style>
  :root {
    --primary: #1a237e;
    --primary-light: #534bae;
    --primary-dark: #000051;
    --secondary: #f50057;
    --secondary-light: #ff5983;
    --secondary-dark: #bb002f;
    --background: #f7f9fc;
    --surface: #ffffff;
    --text-primary: #1a237e;
    --text-secondary: #5c6bc0;
    --success: #43a047;
    --warning: #ffa000;
    --error: #d32f2f;
    --nonmetal: #3caea3;
    --noble-gas: #ff6f61;
    --alkali-metal: #f6d55c;
    --alkaline-earth: #ed553b;
    --metalloid: #9c7bb9;
    --halogen: #20639b;
    --metal: #173f5f;
    --transition-metal: #5c4b9b;
    --lanthanide: #8ac6d1;
    --actinide: #f39189;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px;
    background: var(--background);
    color: var(--text-primary);
    line-height: 1.6;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
  }
  
  header {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  
  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  
  h2 {
    font-size: 1.8rem;
    margin-bottom: 15px;
    color: var(--primary);
  }
  
  .subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
  }
  
  .panel {
    background: var(--surface);
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    margin-bottom: 30px;
    transition: transform 0.3s ease;
  }
  
  .panel:hover {
    transform: translateY(-5px);
  }
  
  .flex-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }
  
  .element-info {
    flex: 1;
    min-width: 300px;
  }
  
  .orbital-info {
    flex: 2;
    min-width: 300px;
  }
  
  select, input {
    width: 100%;
    padding: 12px 15px;
    font-size: 1.1rem;
    margin-bottom: 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    background: white;
    color: var(--text-primary);
    transition: border-color 0.3s;
  }
  
  select:focus, input:focus {
    border-color: var(--primary);
    outline: none;
    box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.2);
  }
  
  .output {
    margin-top: 20px;
    padding: 20px;
    background: #e8eaf6;
    border-radius: 8px;
    white-space: pre-wrap;
    font-family: 'Courier New', monospace;
    font-size: 1.1rem;
    line-height: 1.8;
    border-left: 5px solid var(--primary);
  }
  
  .orbital-diagram {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
  }
  
  .orbital {
    width: 100px;
    text-align: center;
    padding: 15px 10px;
    border-radius: 8px;
    background: #c5cae9;
    color: var(--text-primary);
    user-select: none;
    position: relative;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s;
  }
  
  .orbital:hover {
    transform: scale(1.05);
  }
  
  .orbital-label {
    font-weight: bold;
    font-size: 1.2rem;
    margin-bottom: 5px;
  }
  
  .quantum-numbers {
    font-size: 0.85rem;
    margin-bottom: 10px;
    color: var(--text-secondary);
  }
  
  .orbital-bar {
    width: 100%;
    height: 40px;
    background: #e8eaf6;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
    margin-top: 8px;
  }
  
  .orbital-fill {
    height: 100%;
    border-radius: 8px;
    transition: width 1s ease;
  }
  
  .orbital-count {
  display: block;
  text-align: center;
  margin-top: 6px;
  font-weight: bold;
  color: white;
  text-shadow: 0 0 3px rgba(0,0,0,0.5);
  font-size: 1rem;
}

  
  .element-details {
    margin-top: 25px;
    padding: 20px;
    background: #e3f2fd;
    border-radius: 8px;
    border-left: 5px solid var(--secondary);
  }
  
  .element-properties {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
  }
  
  .property {
    padding: 10px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 6px;
    text-align: center;
  }
  
  .property-name {
    font-weight: bold;
    color: var(--primary);
  }
  
  .property-value {
    font-size: 1.1rem;
    margin-top: 5px;
  }
  
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 20px;
    justify-content: center;
  }
  
  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .legend-color {
    width: 20px;
    height: 20px;
    border-radius: 4px;
  }
  
  .category-nonmetal { background-color: var(--nonmetal); }
  .category-noble-gas { background-color: var(--noble-gas); }
  .category-alkali-metal { background-color: var(--alkali-metal); }
  .category-alkaline-earth { background-color: var(--alkaline-earth); }
  .category-metalloid { background-color: var(--metalloid); }
  .category-halogen { background-color: var(--halogen); }
  .category-metal { background-color: var(--metal); }
  .category-transition-metal { background-color: var(--transition-metal); }
  .category-lanthanide { background-color: var(--lanthanide); }
  .category-actinide { background-color: var(--actinide); }
  
  @media (max-width: 768px) {
    .flex-container {
      flex-direction: column;
    }
    
    .orbital {
      width: 85px;
      padding: 10px 5px;
    }
    
    .orbital-label {
      font-size: 1rem;
    }
    
    .quantum-numbers {
      font-size: 0.7rem;
    }
    
    .orbital-bar {
      height: 30px;
    }
    
    .orbital-fill {
      font-size: 0.8rem;
    }
    
    h1 {
      font-size: 2rem;
    }
    
    h2 {
      font-size: 1.5rem;
    }
    
    .output {
      padding: 15px;
      font-size: 1rem;
    }
    
    .config-text {
      font-size: 1rem;
    }
  }
  
  .search-container {
    position: relative;
  }
  
  .search-icon {
    position: absolute;
    right: 15px;
    top: 13px;
    color: var(--text-secondary);
  }
  
  .config-text {
    font-family: 'Courier New', monospace;
    font-size: 1.2rem;
    line-height: 1.8;
  }
  
  .superscript {
    vertical-align: super;
    font-size: 0.8em;
  }
  
  .element-category {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    color: white;
    font-weight: bold;
    font-size: 0.8rem;
    margin-left: 8px;
  }
  
  /* Soluci√≥n alternativa para super√≠ndices en m√≥viles */
  .config-sup {
    position: relative;
    font-size: 0.8em;
    vertical-align: super;
    line-height: 0;
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <h1>Configuraciones Electr√≥nicas - 118 Elementos</h1>
    <p class="subtitle">Explora todos los elementos de la tabla peri√≥dica</p>
  </header>

  <div class="flex-container">
    <div class="panel element-info">
      <h2>Selecciona un elemento</h2>
      
      <div class="search-container">
        <select id="elementSelect">
          <option value="">--Elige un elemento--</option>
        </select>
        <div class="search-icon">üîç</div>
      </div>
      
      <input type="range" id="atomicNumberSlider" min="1" max="118" value="1" step="1">
      <div style="text-align: center; margin-bottom: 15px;">
        <span id="atomicNumberDisplay">N√∫mero at√≥mico: 1</span>
      </div>
      
      <div class="output" id="configurationOutput">
        Aqu√≠ aparecer√° la configuraci√≥n electr√≥nica.
      </div>
      
      <div class="element-details" id="elementDetails">
        <h3>Informaci√≥n del Elemento</h3>
        <div class="element-properties" id="elementProperties">
          <!-- La informaci√≥n del elemento se insertar√° aqu√≠ -->
        </div>
      </div>
    </div>
    
    <div class="panel orbital-info">
      <h2>Diagrama de Orbitales</h2>
      <div class="orbital-diagram" id="orbitalDiagram"></div>
      
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #c5cae9;"></div>
          <span>Orbital vac√≠o</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #8a2be2;"></div>
          <span>Orbital parcialmente lleno</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #1a237e;"></div>
          <span>Orbital completo</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="panel" style="margin-top: 30px;">
  <h2>Reglas de Slater - C√°lculo Interactivo de Z<sub>ef</sub></h2>
  
  <div class="small" style="margin-bottom: 15px;">
    <p><strong>Las Reglas de Slater</strong> permiten estimar la carga nuclear efectiva (Z<sub>ef</sub>) que experimenta un electr√≥n, teniendo en cuenta el apantallamiento de los dem√°s electrones. Esta herramienta aplica las reglas est√°ndar (agrupamientos y factores 0.35, 0.30, 0.85 y 1.00) y muestra el c√°lculo detallado paso a paso.</p>
    <p>Fuente y reglas aplicadas: LibreTexts (Slater's Rules). </p>
  </div>
  
  <div class="orbital-box" style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
    <h3>Calculadora Interactiva de Z<sub>ef</sub></h3>
    
    <div style="margin: 10px 0; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
      <label for="atom">N√∫mero at√≥mico (Z): </label>
      <input type="number" id="atom" min="1" max="118" value="20" style="width:100px; padding:6px 8px; margin-right: 10px;">
      
      <label for="electron">Electr√≥n (ej: 2p, 3s, 4d): </label>
      <input type="text" id="electron" placeholder="3p" style="width:90px; padding:6px 8px;">
      
      <button class="btn" onclick="runSlaterUI()" style="margin-left: 6px;">Calcular Z<sub>eff</sub></button>
      <button class="btn mutebtn" onclick="runExamples()">Mostrar ejemplos (Ca, Sn, Pb)</button>
      <button class="btn mutebtn" onclick="clearSlater()" style="margin-left:6px;">Limpiar</button>
    </div>
    
    <div id="slaterFeedback" style="margin-top: 15px; padding: 12px; border-radius: 6px; background: #fff; font-family: monospace;"></div>
      <div id="slaterResults" style="margin-top:12px;"></div>
  </div>
  
  <div class="explanation" style="margin-top: 20px;">
    <h4>Notas r√°pidas</h4>
    <ul class="small">
      <li>Introduce Z (1‚Äì118) y la subcapa objetivo en formato <code>n‚Ñì</code> (ej. <code>3p</code>, <code>4d</code>).</li>
      <li>El resultado muestra la configuraci√≥n electr√≥nica usada (orden Aufbau), los grupos considerados y el aporte de cada uno a S.</li>
    </ul>
  </div>
</div>

<style>
  /* Estilos m√≠n. para la tabla de salida */
  #slaterFeedback table { width:100%; border-collapse: collapse; margin-top:8px; }
  #slaterFeedback th, #slaterFeedback td { border: 1px solid #eee; padding:6px 8px; text-align:left; font-size:0.95rem; }
  #slaterFeedback th { background:#faf1ff; }
  #slaterFeedback .muted { color:#666; font-size:0.9rem; }
</style>

<!-- Agregar esta secci√≥n despu√©s del diagrama de orbitales -->
<div class="panel" style="margin-top: 30px;">
  <h2>Principio de Exclusi√≥n de Pauli y Regla de Hund</h2>
  
  <div class="small" style="margin-bottom: 15px;">
    <p><strong>Principio de Exclusi√≥n de Pauli:</strong> Dos electrones en un mismo √°tomo no pueden tener los mismos cuatro n√∫meros cu√°nticos.</p>18
    <p><strong>Regla de Hund:</strong> Los electrones deben ocupar todos los orbitales degenerados individualmente con spines paralelos antes de que ocurra el apareamiento.</p>
  </div>
  
  <div class="orbital-box" style="background: #e8eaf6; padding: 15px; border-radius: 8px;">
    <h3>Orbital P - Ejemplo interactivo</h3>
    
    <div class="orbital-p-container" style="display: flex; gap: 15px; justify-content: center; margin: 20px 0;">
      <div class="orbital-p" data-orbital="px" style="width: 80px; text-align: center;">
        <div class="orbital-label">px</div>
        <div class="orbital-electrons" style="min-height: 80px; background: #c5cae9; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 5px; justify-content: center;">
          <!-- Electrones aparecer√°n aqu√≠ -->
        </div>
        <button class="btn" style="margin-top: 10px; width: 100%;" onclick="addElectron('px')">+ Electr√≥n</button>
      </div>
      
      <div class="orbital-p" data-orbital="py" style="width: 80px; text-align: center;">
        <div class="orbital-label">py</div>
        <div class="orbital-electrons" style="min-height: 80px; background: #c5cae9; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 5px; justify-content: center;">
          <!-- Electrones aparecer√°n aqu√≠ -->
        </div>
        <button class="btn" style="margin-top: 10px; width: 100%;" onclick="addElectron('py')">+ Electr√≥n</button>
      </div>
      
      <div class="orbital-p" data-orbital="pz" style="width: 80px; text-align: center;">
        <div class="orbital-label">pz</div>
        <div class="orbital-electrons" style="min-height: 80px; background: #c5cae9; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; gap: 5px; justify-content: center;">
          <!-- Electrones aparecer√°n aqu√≠ -->
        </div>
        <button class="btn" style="margin-top: 10px; width: 100%;" onclick="addElectron('pz')">+ Electr√≥n</button>
      </div>
    </div>
    
    <div style="text-align: center; margin: 15px 0;">
      <button class="btn mutebtn" onclick="resetOrbitals()" style="margin-right: 10px;">Reiniciar</button>
      <button class="btn" onclick="autoFillHund()">Llenado autom√°tico (Regla de Hund)</button>
    </div>
    
    <div id="pauliFeedback" style="margin-top: 15px; padding: 10px; border-radius: 6px; background: #f5f5f5;"></div>
  </div>
  
  <div class="explanation" style="margin-top: 20px;">
    <h4>¬øQu√© est√° pasando aqu√≠?</h4>
    <ul class="small">
      <li>Cada orbital p puede contener m√°ximo 2 electrones con espines opuestos (Principio de Exclusi√≥n de Pauli)</li>
      <li>La <strong>Regla de Hund</strong> establece que debes llenar todos los orbitales con 1 electr√≥n (todos con spin ‚Üë) antes de aparear electrones</li>
      <li>Si intentas aparear electrones (agregar un segundo electr√≥n con spin ‚Üì) sin antes haber llenado todos los orbitales disponibles, estar√°s violando la Regla de Hund</li>
    </ul>
  </div>
</div>

<style>
.electron {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  margin: 0 auto;
  color: white;
  font-weight: bold;
  font-size: 16px;
}

.electron.up {
  background: #ff5252; /* Rojo para spin arriba */
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.electron.down {
  background: #2196f3; /* Azul para spin abajo */
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.hund-violation {
  animation: shake 0.5s ease-in-out;
  border: 2px solid #ff9800;
  box-shadow: 0 0 8px #ff9800;
}

.pauli-violation {
  animation: shake 0.5s ease-in-out;
  border: 2px solid #f44336;
  box-shadow: 0 0 8px #f44336;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.orbital-p {
  transition: all 0.3s ease;
}
</style>

<script>
// Variables para el estado de los orbitales
const orbitalState = {
  px: [],
  py: [],
  pz: []
};

// Funci√≥n para contar orbitales con un electr√≥n
function countSinglyOccupied() {
  return [orbitalState.px, orbitalState.py, orbitalState.pz].filter(e => e.length === 1).length;
}

// Funci√≥n para contar orbitales vac√≠os
function countEmptyOrbitals() {
  return [orbitalState.px, orbitalState.py, orbitalState.pz].filter(e => e.length === 0).length;
}

// Funci√≥n para verificar si hay orbitales con un electr√≥n que no tienen spin paralelo
function hasNonParallelSpins() {
  const spins = [];
  if (orbitalState.px.length === 1) spins.push(orbitalState.px[0]);
  if (orbitalState.py.length === 1) spins.push(orbitalState.py[0]);
  if (orbitalState.pz.length === 1) spins.push(orbitalState.pz[0]);
  
  // Si hay m√°s de un spin y no todos son iguales, hay spines no paralelos
  return spins.length > 1 && !spins.every((val, i, arr) => val === arr[0]);
}

// Funci√≥n para agregar un electr√≥n a un orbital
function addElectron(orbital) {
  const electronsContainer = document.querySelector(`.orbital-p[data-orbital="${orbital}"] .orbital-electrons`);
  const currentElectrons = orbitalState[orbital];
  
  // Verificar si ya hay 2 electrones (m√°ximo permitido por Pauli)
  if (currentElectrons.length >= 2) {
    showFeedback("‚ùå ¬°Violaci√≥n del Principio de Exclusi√≥n de Pauli! No puedes agregar m√°s de 2 electrones en un mismo orbital.", "error");
    
    // Efecto visual de violaci√≥n Pauli
    const orbitalEl = document.querySelector(`.orbital-p[data-orbital="${orbital}"]`);
    orbitalEl.classList.add('pauli-violation');
    setTimeout(() => orbitalEl.classList.remove('pauli-violation'), 1000);
    
    return;
  }
  
  // Determinar el spin (primero siempre ‚Üë, luego alternar)
  let spin = 'up';
  if (currentElectrons.length === 1) {
    spin = currentElectrons[0] === 'up' ? 'down' : 'up';
  }
  
  // VERIFICACI√ìN DE LA REGLA DE HUND - ¬°CORRECCI√ìN IMPORTANTE!
  // No se puede aparear (agregar segundo electr√≥n) si hay orbitales vac√≠os
  if (currentElectrons.length === 1 && countEmptyOrbitals() > 0) {
    showFeedback("‚ùå ¬°Violaci√≥n de la Regla de Hund! No puedes aparear electrones cuando todav√≠a hay orbitales vac√≠os. Llena todos los orbitales con un electr√≥n primero.", "error");
    
      // Efecto visual de violaci√≥n Hund
    const orbitalEl = document.querySelector(`.orbital-p[data-orbital="${orbital}"]`);
    orbitalEl.classList.add('hund-violation');
    setTimeout(() => orbitalEl.classList.remove('hund-violation'), 1000);

    return;
  }

  // Agregar electr√≥n al estado
  orbitalState[orbital].push(spin);

  // Crear elemento visual del electr√≥n
  const electronEl = document.createElement('div');
  electronEl.className = `electron ${spin}`;
  electronEl.textContent = spin === 'up' ? '‚Üë' : '‚Üì';
  electronEl.title = `Electr√≥n con spin ${spin === 'up' ? '+1/2' : '-1/2'}`;
  electronsContainer.appendChild(electronEl);

  showFeedback(`‚úì Electr√≥n agregado al orbital ${orbital} con spin ${spin === 'up' ? '+¬Ω' : '-¬Ω'}`, "success");
}

// Funci√≥n para llenado autom√°tico seg√∫n Regla de Hund
function autoFillHund() {
  resetOrbitals();

  const orbitals = ['px', 'py', 'pz'];
  // Ejemplo con 3 electrones (puedes cambiar n√∫mero seg√∫n el nivel)
  const totalElectrons = 3;

  for (let i = 0; i < totalElectrons; i++) {
    setTimeout(() => {
      addElectron(orbitals[i]);
    }, i * 300);
  }

  setTimeout(() => {
    showFeedback("‚úì Llenado autom√°tico completado seg√∫n la Regla de Hund: m√°ximo paralelismo de spines.", "success");
  }, totalElectrons * 300 + 100);
}

// Funci√≥n para reiniciar los orbitales
function resetOrbitals() {
  const orbitals = ['px', 'py', 'pz'];
  orbitals.forEach(orbital => {
    orbitalState[orbital] = [];
    const container = document.querySelector(`.orbital-p[data-orbital="${orbital}"] .orbital-electrons`);
    container.innerHTML = '';
  });
  showFeedback("Orbitales reiniciados. Puedes comenzar de nuevo.", "info");
}

// Funci√≥n para mostrar feedback
function showFeedback(message, type) {
  const feedbackEl = document.getElementById('pauliFeedback');
  feedbackEl.textContent = message;
  feedbackEl.style.backgroundColor = type === 'error' ? '#ffebee' : 
                                  type === 'success' ? '#e8f5e9' : '#e3f2fd';
  feedbackEl.style.color = type === 'error' ? '#c62828' : 
                           type === 'success' ? '#2e7d32' : '#1565c0';
}

// Inicializar mensaje al cargar la p√°gina
document.addEventListener('DOMContentLoaded', function() {
  showFeedback("Agrega electrones a los orbitales P para entender el Principio de Exclusi√≥n de Pauli y la Regla de Hund.", "info");
});
</script>

<script>
/* ---------- Orden de energ√≠a (Aufbau) usado para construir la configuraci√≥n ---------- */
const orbitalOrder = [
  '1s','2s','2p','3s','3p','4s','3d','4p','5s','4d','5p',
  '6s','4f','5d','6p','7s','5f','6d','7p'
];
const capacity = { s:2, p:6, d:10, f:14 };

/* Genera configuraci√≥n en el orden Aufbau, cada entrada tiene idx (posici√≥n en orbitalOrder) */
function generarConfiguracion(Z){
  let remaining = Z;
  const config = [];
  orbitalOrder.forEach((orb, idx) => {
    if(remaining <= 0) return;
    const m = orb.match(/^(\d+)([spdf])$/i);
    if(!m) return;
    const n = parseInt(m[1], 10);
    const tipo = m[2].toLowerCase();
    const take = Math.min(remaining, capacity[tipo] || 0);
    if(take > 0) config.push({ orb, n, tipo, e: take, idx });
    remaining -= take;
  });
  return config;
}

/* Devuelve HTML mostrando el orden de energ√≠a y marcando el orbital objetivo */
function formatoOrdenEnergiaHTML(targetOrb) {
  const parts = orbitalOrder.map(o => {
    if(o.toLowerCase() === targetOrb.toLowerCase()) return `<strong style="color:#ffffff;background:#2b7a78;padding:2px 6px;border-radius:6px">${o}</strong>`;
    return `<span style="opacity:0.85">${o}</span>`;
  });
  return `<div style="margin-bottom:8px"><strong>Orden de energ√≠a (Aufbau) mostrado:</strong><div style="margin-top:6px;line-height:1.6">${parts.join(' ‚Üí ')}</div></div>`;
}

/* Calcula Slater devolviendo desglose por orbital (solo considera orbitales a la izquierda del objetivo) */
function calcularSlaterDetalle(Z, elecRaw) {
  const elec = (elecRaw||'').trim().toLowerCase();
  const m = elec.match(/^(\d+)([spdf])$/i);
  if(!m) return { error: 'Formato inv√°lido. Use, por ejemplo: 3p, 4d, 6s' };

  const nObj = parseInt(m[1], 10);
  const tipoObj = m[2].toLowerCase();

  // generar configuraci√≥n
  const config = generarConfiguracion(Z);

  // encontrar entrada objetivo (por orb exacto)
  const targetEntry = config.find(c => c.orb.toLowerCase() === elec);
  if(!targetEntry) return { error: `El orbital ${elec} no aparece en la configuraci√≥n para Z=${Z}.` };

  // √≠ndice en el orden Aufbau: consideramos s√≥lo orbitals con idx <= targetIdx (izquierda incluyendo objetivo)
  const targetIdx = targetEntry.idx;
  const leftOrbitals = config.filter(c => c.idx <= targetIdx);

  let S = 0;
  const detalle = [];

  // recorrer orbitales 'izquierda' y calcular factor y contribuci√≥n
  leftOrbitals.forEach(c => {
    let factor = 0;
    let counted = 0;

    // si el objetivo es s/p
    if(tipoObj === 's' || tipoObj === 'p') {
      if(c.n === nObj && (c.tipo === 's' || c.tipo === 'p')) {
        // mismos s/p en mismo n ‚Üí 0.35 (excluir 1 electr√≥n: el observado)
        factor = (nObj === 1) ? 0.30 : 0.35; // excepci√≥n 1s -> 0.30
        counted = c.e - (c.orb.toLowerCase() === elec ? 1 : 0);
      } else if(c.n === nObj - 1) {
        // capa n-1 ‚Üí 0.85 (incluye d/f si existen con n-1)
        factor = 0.85;
        counted = c.e;
      } else if(c.n <= nObj - 2) {
        factor = 1.00;
        counted = c.e;
      } else {
        // (por seguridad) si est√° en el mismo n pero no s/p (ej: d en mismo n y aparece a la izquierda),
        // para s/p objetivo esos d pertenecen a n (si n===nObj) pero NO cuentan como "mismo grupo s/p"; 
        // si n === nObj y tipo != s/p, no los sumamos en "mismo s/p" (quedan ignorados aqu√≠).
        factor = 0;
        counted = 0;
      }
    } else {
      // objetivo d/f
      if(c.n === nObj && (c.tipo === 'd' || c.tipo === 'f')) {
        // mismos d/f en mismo n ‚Üí 0.35 (excluir 1)
        factor = 0.35;
        counted = c.e - (c.orb.toLowerCase() === elec ? 1 : 0);
      } else if(c.idx < targetIdx || (c.idx === targetIdx && c.orb.toLowerCase() !== elec)) {
        // cualquier orbital en capas internas (n < nObj) o acomp. previos ‚Üí 1.00
        // (para d/f: n-1 y menores son 1.00)
        if(c.n < nObj) {
          factor = 1.00;
          counted = c.e;
        } else {
          // mismo n pero tipo distinto (p.ej 4s/4p) y est√° a la izquierda: para d objetivo cuentan como 1.00
          if(c.n === nObj) { factor = 1.00; counted = c.e; }
        }
      } else {
        factor = 0;
        counted = 0;
      }
    }

    const contrib = Number((counted * factor).toFixed(4));
    if(counted > 0 && factor > 0) {
      detalle.push({
        orb: c.orb, n: c.n, tipo: c.tipo, total: c.e, counted, factor, contrib
      });
      S += contrib;
    }
  });

  S = Number(S.toFixed(4));
  const Zef = Number((Z - S).toFixed(4));
  return { Z, elec, nObj, tipoObj, S, Zef, detalle, config, targetOrb: targetEntry.orb };
}

/* ---------- UI: tabla limpia y orden de energ√≠a ---------- */
function formaTablaResultado(res){
  if(res.error) return `<div style="color:#b71c1c"><strong>Error:</strong> ${res.error}</div>`;

  // orden de energ√≠a con resaltado
  let html = formatoOrdenEnergiaHTML(res.elec);

  html += `<div style="margin-bottom:8px"><strong>Resumen:</strong> Z=${res.Z}, objetivo <strong>${res.elec}</strong> ‚Üí S = <strong>${res.S.toFixed(4)}</strong>, Z_eff ‚âà <strong>${res.Zef.toFixed(4)}</strong></div>`;

  // tabla por orbital (solo los que sumaron)
  html += `<table style="width:100%;border-collapse:collapse;font-family:monospace">
    <thead>
      <tr style="background:#f3f3f3">
        <th style="text-align:left;padding:8px;border:1px solid #eee">Orbital</th>
        <th style="text-align:right;padding:8px;border:1px solid #eee">Electrones</th>
        <th style="text-align:right;padding:8px;border:1px solid #eee">Contados</th>
        <th style="text-align:right;padding:8px;border:1px solid #eee">Factor</th>
        <th style="text-align:right;padding:8px;border:1px solid #eee">Contribuci√≥n</th>
      </tr>
    </thead><tbody>`;

  res.detalle.forEach(r => {
    html += `<tr>
      <td style="padding:6px;border:1px solid #eee">${r.orb}</td>
      <td style="padding:6px;border:1px solid #eee;text-align:right">${r.total}</td>
      <td style="padding:6px;border:1px solid #eee;text-align:right">${r.counted}</td>
      <td style="padding:6px;border:1px solid #eee;text-align:right">${r.factor.toFixed(2)}</td>
      <td style="padding:6px;border:1px solid #eee;text-align:right">${r.contrib.toFixed(2)}</td>
    </tr>`;
  });

  html += `</tbody></table>`;

  // Mostrar configuraci√≥n generada (agrupada por n para legibilidad)
  const grouped = {};
  res.config.forEach(c => {
    if(!grouped[c.n]) grouped[c.n] = [];
    grouped[c.n].push(`${c.orb}${c.e}`);
  });
  const groupingHtml = Object.keys(grouped).sort((a,b)=>a-b).map(n=> `(${ grouped[n].join(' ') })`).join(' ');

  html += `<div style="margin-top:8px;color:#555"><strong>Configuraci√≥n (Aufbau usado):</strong> ${groupingHtml}</div>`;

  return html;
}

/* ---------- funciones de integraci√≥n con tu HTML ---------- */
function runSlaterUI(){
  const Z = Number(document.getElementById('atom').value);
  const orb = document.getElementById('electron').value;
  const fb = document.getElementById('slaterFeedback');
  const out = document.getElementById('slaterResults');

  fb.innerHTML = ''; out.innerHTML = '';
  if(!Z || !orb) { fb.innerHTML = '<span style="color:#b71c1c">Introduce Z y subcapa (ej. 3p)</span>'; return; }
  if(Z < 1 || Z > 118) { fb.innerHTML = '<span style="color:#b71c1c">Z fuera de rango (1‚Äì118).</span>'; return; }

  const res = calcularSlaterDetalle(Z, orb);
  if(res.error) { fb.innerHTML = `<span style="color:#b71c1c">${res.error}</span>`; return; }

  fb.innerHTML = `<div style="padding:8px;background:#fff;border-radius:6px">C√°lculo completado. Desglose abajo.</div>`;
  out.innerHTML = formaTablaResultado(res);
}

function runExamples(){
  const out = document.getElementById('slaterResults');
  const examples = [
    {Z:20, orb:'3p'},  // Ca -> S=11.25, Z_eff ‚âà 8.75
    {Z:50, orb:'4d'},  // Sn
    {Z:82, orb:'6p'}   // Pb
  ];
  let html = '<div style="display:flex;flex-direction:column;gap:16px">';
  examples.forEach(ex => {
    const r = calcularSlaterDetalle(ex.Z, ex.orb);
    html += `<div style="padding:8px;border-radius:8px;border:1px solid #efefef;background:#fff">${formaTablaResultado(r)}</div>`;
  });
  html += '</div>';
  out.innerHTML = html;
  document.getElementById('slaterFeedback').innerHTML = `<div style="padding:6px;background:#fff;border-radius:6px">Ejemplos (Ca, Sn, Pb) mostrados abajo.</div>`;
}

function clearSlater(){
  document.getElementById('slaterResults').innerHTML = '';
  document.getElementById('slaterFeedback').innerHTML = '';
  document.getElementById('electron').value = '';
  document.getElementById('atom').value = '';
}

/* Inicializar: no correr ejemplos autom√°ticamente para no modificar tu p√°gina al cargar */
document.addEventListener('DOMContentLoaded', ()=> {
  // opcional: prellenar con Ca
  document.getElementById('atom').value = '20';
  document.getElementById('electron').value = '3p';
});
</script>



<script>
// Base de datos completa con los 118 elementos
const elements = {
  "H": {Z:1, name:"Hidr√≥geno", mass:1.008, category:"No metal", config:"1s¬π", categoryClass: "category-nonmetal"},
  "He": {Z:2, name:"Helio", mass:4.003, category:"Gas noble", config:"1s¬≤", categoryClass: "category-noble-gas"},
  "Li": {Z:3, name:"Litio", mass:6.94, category:"Metal alcalino", config:"1s¬≤ 2s¬π", categoryClass: "category-alkali-metal"},
  "Be": {Z:4, name:"Berilio", mass:9.012, category:"Metal alcalinot√©rreo", config:"1s¬≤ 2s¬≤", categoryClass: "category-alkaline-earth"},
  "B": {Z:5, name:"Boro", mass:10.81, category:"Metaloide", config:"1s¬≤ 2s¬≤ 2p¬π", categoryClass: "category-metalloid"},
  "C": {Z:6, name:"Carbono", mass:12.01, category:"No metal", config:"1s¬≤ 2s¬≤ 2p¬≤", categoryClass: "category-nonmetal"},
  "N": {Z:7, name:"Nitr√≥geno", mass:14.01, category:"No metal", config:"1s¬≤ 2s¬≤ 2p¬≥", categoryClass: "category-nonmetal"},
  "O": {Z:8, name:"Ox√≠geno", mass:16.00, category:"No metal", config:"1s¬≤ 2s¬≤ 2p‚Å¥", categoryClass: "category-nonmetal"},
  "F": {Z:9, name:"Fl√∫or", mass:19.00, category:"Hal√≥geno", config:"1s¬≤ 2s¬≤ 2p‚Åµ", categoryClass: "category-halogen"},
  "Ne": {Z:10, name:"Ne√≥n", mass:20.18, category:"Gas noble", config:"1s¬≤ 2s¬≤ 2p‚Å∂", categoryClass: "category-noble-gas"},
  "Na": {Z:11, name:"Sodio", mass:22.99, category:"Metal alcalino", config:"[Ne] 3s¬π", categoryClass: "category-alkali-metal"},
  "Mg": {Z:12, name:"Magnesio", mass:24.31, category:"Metal alcalinot√©rreo", config:"[Ne] 3s¬≤", categoryClass: "category-alkaline-earth"},
  "Al": {Z:13, name:"Aluminio", mass:26.98, category:"Metal", config:"[Ne] 3s¬≤ 3p¬π", categoryClass: "category-metal"},
  "Si": {Z:14, name:"Silicio", mass:28.09, category:"Metaloide", config:"[Ne] 3s¬≤ 3p¬≤", categoryClass: "category-metalloid"},
  "P": {Z:15, name:"F√≥sforo", mass:30.97, category:"No metal", config:"[Ne] 3s¬≤ 3p¬≥", categoryClass: "category-nonmetal"},
  "S": {Z:16, name:"Azufre", mass:32.07, category:"No metal", config:"[Ne] 3s¬≤ 3p‚Å¥", categoryClass: "category-nonmetal"},
  "Cl": {Z:17, name:"Cloro", mass:35.45, category:"Hal√≥geno", config:"[Ne] 3s¬≤ 3p‚Åµ", categoryClass: "category-halogen"},
  "Ar": {Z:18, name:"Arg√≥n", mass:39.95, category:"Gas noble", config:"[Ne] 3s¬≤ 3p‚Å∂", categoryClass: "category-noble-gas"},
  "K": {Z:19, name:"Potasio", mass:39.10, category:"Metal alcalino", config:"[Ar] 4s¬π", categoryClass: "category-alkali-metal"},
  "Ca": {Z:20, name:"Calcio", mass:40.08, category:"Metal alcalinot√©rreo", config:"[Ar] 4s¬≤", categoryClass: "category-alkaline-earth"},
  "Sc": {Z:21, name:"Escandio", mass:44.96, category:"Metal de transici√≥n", config:"[Ar] 3d¬π 4s¬≤", categoryClass: "category-transition-metal"},
  "Ti": {Z:22, name:"Titanio", mass:47.87, category:"Metal de transici√≥n", config:"[Ar] 3d¬≤ 4s¬≤", categoryClass: "category-transition-metal"},
  "V": {Z:23, name:"Vanadio", mass:50.94, category:"Metal de transici√≥n", config:"[Ar] 3d¬≥ 4s¬≤", categoryClass: "category-transition-metal"},
  "Cr": {Z:24, name:"Cromo", mass:52.00, category:"Metal de transici√≥n", config:"[Ar] 3d‚Åµ 4s¬π", categoryClass: "category-transition-metal"},
  "Mn": {Z:25, name:"Manganeso", mass:54.94, category:"Metal de transici√≥n", config:"[Ar] 3d‚Åµ 4s¬≤", categoryClass: "category-transition-metal"},
  "Fe": {Z:26, name:"Hierro", mass:55.85, category:"Metal de transici√≥n", config:"[Ar] 3d‚Å∂ 4s¬≤", categoryClass: "category-transition-metal"},
  "Co": {Z:27, name:"Cobalto", mass:58.93, category:"Metal de transici√≥n", config:"[Ar] 3d‚Å∑ 4s¬≤", categoryClass: "category-transition-metal"},
  "Ni": {Z:28, name:"N√≠quel", mass:58.69, category:"Metal de transici√≥n", config:"[Ar] 3d‚Å∏ 4s¬≤", categoryClass: "category-transition-metal"},
  "Cu": {Z:29, name:"Cobre", mass:63.55, category:"Metal de transici√≥n", config:"[Ar] 3d¬π‚Å∞ 4s¬π", categoryClass: "category-transition-metal"},
  "Zn": {Z:30, name:"Zinc", mass:65.38, category:"Metal de transici√≥n", config:"[Ar] 3d¬π‚Å∞ 4s¬≤", categoryClass: "category-transition-metal"},
  "Ga": {Z:31, name:"Galio", mass:69.72, category:"Metal", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p¬π", categoryClass: "category-metal"},
  "Ge": {Z:32, name:"Germanio", mass:72.63, category:"Metaloide", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p¬≤", categoryClass: "category-metalloid"},
  "As": {Z:33, name:"Ars√©nico", mass:74.92, category:"Metaloide", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p¬≥", categoryClass: "category-metalloid"},
  "Se": {Z:34, name:"Selenio", mass:78.97, category:"No metal", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p‚Å¥", categoryClass: "category-nonmetal"},
  "Br": {Z:35, name:"Bromo", mass:79.90, category:"Hal√≥geno", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p‚Åµ", categoryClass: "category-halogen"},
  "Kr": {Z:36, name:"Kript√≥n", mass:83.80, category:"Gas noble", config:"[Ar] 3d¬π‚Å∞ 4s¬≤ 4p‚Å∂", categoryClass: "category-noble-gas"},
  "Rb": {Z:37, name:"Rubidio", mass:85.47, category:"Metal alcalino", config:"[Kr] 5s¬π", categoryClass: "category-alkali-metal"},
  "Sr": {Z:38, name:"Estroncio", mass:87.62, category:"Metal alcalinot√©rreo", config:"[Kr] 5s¬≤", categoryClass: "category-alkaline-earth"},
  "Y": {Z:39, name:"Itrio", mass:88.91, category:"Metal de transici√≥n", config:"[Kr] 4d¬π 5s¬≤", categoryClass: "category-transition-metal"},
  "Zr": {Z:40, name:"Circonio", mass:91.22, category:"Metal de transici√≥n", config:"[Kr] 4d¬≤ 5s¬≤", categoryClass: "category-transition-metal"},
  "Nb": {Z:41, name:"Niobio", mass:92.91, category:"Metal de transici√≥n", config:"[Kr] 4d‚Å¥ 5s¬π", categoryClass: "category-transition-metal"},
  "Mo": {Z:42, name:"Molibdeno", mass:95.95, category:"Metal de transici√≥n", config:"[Kr] 4d‚Åµ 5s¬π", categoryClass: "category-transition-metal"},
  "Tc": {Z:43, name:"Tecnecio", mass:98.00, category:"Metal de transici√≥n", config:"[Kr] 4d‚Åµ 5s¬≤", categoryClass: "category-transition-metal"},
  "Ru": {Z:44, name:"Rutenio", mass:101.1, category:"Metal de transici√≥n", config:"[Kr] 4d‚Å∑ 5s¬π", categoryClass: "category-transition-metal"},
  "Rh": {Z:45, name:"Rodio", mass:102.9, category:"Metal de transici√≥n", config:"[Kr] 4d‚Å¥ 5s¬π", categoryClass: "category-transition-metal"},
  "Pd": {Z:46, name:"Paladio", mass:106.4, category:"Metal de transici√≥n", config:"[Kr] 4d¬π‚Å∞", categoryClass: "category-transition-metal"},
  "Ag": {Z:47, name:"Plata", mass:107.9, category:"Metal de transici√≥n", config:"[Kr] 4d¬π‚Å∞ 5s¬π", categoryClass: "category-transition-metal"},
  "Cd": {Z:48, name:"Cadmio", mass:112.4, category:"Metal de transici√≥n", config:"[Kr] 4d¬π‚Å∞ 5s¬≤", categoryClass: "category-transition-metal"},
  "In": {Z:49, name:"Indio", mass:114.8, category:"Metal", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p¬π", categoryClass: "category-metal"},
  "Sn": {Z:50, name:"Esta√±o", mass:118.7, category:"Metal", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p¬≤", categoryClass: "category-metal"},
  "Sb": {Z:51, name:"Antimonio", mass:121.8, category:"Metaloide", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p¬≥", categoryClass: "category-metalloid"},
  "Te": {Z:52, name:"Telurio", mass:127.6, category:"Metaloide", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p‚Å¥", categoryClass: "category-metalloid"},
  "I": {Z:53, name:"Yodo", mass:126.9, category:"Hal√≥geno", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p‚Åµ", categoryClass: "category-halogen"},
  "Xe": {Z:54, name:"Xen√≥n", mass:131.3, category:"Gas noble", config:"[Kr] 4d¬π‚Å∞ 5s¬≤ 5p‚Å∂", categoryClass: "category-noble-gas"},
  "Cs": {Z:55, name:"Cesio", mass:132.9, category:"Metal alcalino", config:"[Xe] 6s¬π", categoryClass: "category-alkali-metal"},
  "Ba": {Z:56, name:"Bario", mass:137.3, category:"Metal alcalinot√©rreo", config:"[Xe] 6s¬≤", categoryClass: "category-alkaline-earth"},
  "La": {Z:57, name:"Lantano", mass:138.9, category:"Lant√°nido", config:"[Xe] 5d¬π 6s¬≤", categoryClass: "category-lanthanide"},
  "Ce": {Z:58, name:"Cerio", mass:140.1, category:"Lant√°nido", config:"[Xe] 4f¬π 5d¬π 6s¬≤", categoryClass: "category-lanthanide"},
  "Pr": {Z:59, name:"Praseodimio", mass:140.9, category:"Lant√°nido", config:"[Xe] 4f¬≥ 6s¬≤", categoryClass: "category-lanthanide"},
  "Nd": {Z:60, name:"Neodimio", mass:144.2, category:"Lant√°nido", config:"[Xe] 4f‚Å¥ 6s¬≤", categoryClass: "category-lanthanide"},
  "Pm": {Z:61, name:"Promecio", mass:145.0, category:"Lant√°nido", config:"[Xe] 4f‚Åµ 6s¬≤", categoryClass: "category-lanthanide"},
  "Sm": {Z:62, name:"Samario", mass:150.4, category:"Lant√°nido", config:"[Xe] 4f‚Å∂ 6s¬≤", categoryClass: "category-lanthanide"},
  "Eu": {Z:63, name:"Europio", mass:152.0, category:"Lant√°nido", config:"[Xe] 4f‚Å∑ 6s¬≤", categoryClass: "category-lanthanide"},
  "Gd": {Z:64, name:"Gadolinio", mass:157.3, category:"Lant√°nido", config:"[Xe] 4f‚Å∑ 5d¬π 6s¬≤", categoryClass: "category-lanthanide"},
  "Tb": {Z:65, name:"Terbio", mass:158.9, category:"Lant√°nido", config:"[Xe] 4f‚Åπ 6s¬≤", categoryClass: "category-lanthanide"},
  "Dy": {Z:66, name:"Disprosio", mass:162.5, category:"Lant√°nido", config:"[Xe] 4f¬π‚Å∞ 6s¬≤", categoryClass: "category-lanthanide"},
  "Ho": {Z:67, name:"Holmio", mass:164.9, category:"Lant√°nido", config:"[Xe] 4f¬π¬π 6s¬≤", categoryClass: "category-lanthanide"},
  "Er": {Z:68, name:"Erbio", mass:167.3, category:"Lant√°nido", config:"[Xe] 4f¬π¬≤ 6s¬≤", categoryClass: "category-lanthanide"},
  "Tm": {Z:69, name:"Tulio", mass:168.9, category:"Lant√°nido", config:"[Xe] 4f¬π¬≥ 6s¬≤", categoryClass: "category-lanthanide"},
  "Yb": {Z:70, name:"Iterbio", mass:173.1, category:"Lant√°nido", config:"[Xe] 4f¬π‚Å¥ 6s¬≤", categoryClass: "category-lanthanide"},
  "Lu": {Z:71, name:"Lutecio", mass:175.0, category:"Lant√°nido", config:"[Xe] 4f¬π‚Å¥ 5d¬π 6s¬≤", categoryClass: "category-lanthanide"},
  "Hf": {Z:72, name:"Hafnio", mass:178.5, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d¬≤ 6s¬≤", categoryClass: "category-transition-metal"},
  "Ta": {Z:73, name:"Tantalio", mass:180.9, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d¬≥ 6s¬≤", categoryClass: "category-transition-metal"},
  "W": {Z:74, name:"Wolframio", mass:183.8, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d‚Å¥ 6s¬≤", categoryClass: "category-transition-metal"},
  "Re": {Z:75, name:"Renio", mass:186.2, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d‚Åµ 6s¬≤", categoryClass: "category-transition-metal"},
  "Os": {Z:76, name:"Osmio", mass:190.2, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d‚Å∂ 6s¬≤", categoryClass: "category-transition-metal"},
  "Ir": {Z:77, name:"Iridio", mass:192.2, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d‚Å∑ 6s¬≤", categoryClass: "category-transition-metal"},
  "Pt": {Z:78, name:"Platino", mass:195.1, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d‚Åπ 6s¬π", categoryClass: "category-transition-metal"},
  "Au": {Z:79, name:"Oro", mass:197.0, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬π", categoryClass: "category-transition-metal"},
  "Hg": {Z:80, name:"Mercurio", mass:200.6, category:"Metal de transici√≥n", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤", categoryClass: "category-transition-metal"},
  "Tl": {Z:81, name:"Talio", mass:204.4, category:"Metal", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6p¬π", categoryClass: "category-metal"},
  "Pb": {Z:82, name:"Plomo", mass:207.2, category:"Metal", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6p¬≤", categoryClass: "category-metal"},
  "Bi": {Z:83, name:"Bismuto", mass:209.0, category:"Metal", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6p¬≥", categoryClass: "category-metal"},
  "Po": {Z:84, name:"Polonio", mass:209.0, category:"Metaloide", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6p‚Å¥", categoryClass: "category-metalloid"},
  "At": {Z:85, name:"Astato", mass:210.0, category:"Hal√≥geno", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6p‚Åµ", categoryClass: "category-halogen"},
  "Rn": {Z:86, name:"Rad√≥n", mass:222.0, category:"Gas noble", config:"[Xe] 4f¬π‚Å¥ 5d¬π‚Å∞ 6s¬≤ 6pÔøΩ‚ë•", categoryClass: "category-noble-gas"},
  "Fr": {Z:87, name:"Francio", mass:223.0, category:"Metal alcalino", config:"[Rn] 7s¬π", categoryClass: "category-alkali-metal"},
  "Ra": {Z:88, name:"Radio", mass:226.0, category:"Metal alcalinot√©rreo", config:"[Rn] 7s¬≤", categoryClass: "category-alkaline-earth"},
  "Ac": {Z:89, name:"Actinio", mass:227.0, category:"Act√≠nido", config:"[Rn] 6d¬π 7s¬≤", categoryClass: "category-actinide"},
  "Th": {Z:90, name:"Torio", mass:232.0, category:"Act√≠nido", config:"[Rn] 6d¬≤ 7s¬≤", categoryClass: "category-actinide"},
  "Pa": {Z:91, name:"Protactinio", mass:231.0, category:"Act√≠nido", config:"[Rn] 5f¬≤ 6d¬π 7s¬≤", categoryClass: "category-actinide"},
  "U": {Z:92, name:"Uranio", mass:238.0, category:"Act√≠nido", config:"[Rn] 5f¬≥ 6d¬π 7s¬≤", categoryClass: "category-actinide"},
  "Np": {Z:93, name:"Neptunio", mass:237.0, category:"Act√≠nido", config:"[Rn] 5f‚Å¥ 6d¬π 7s¬≤", categoryClass: "category-actinide"},
  "Pu": {Z:94, name:"Plutonio", mass:244.0, category:"Act√≠nido", config:"[Rn] 5f‚Å∂ 7s¬≤", categoryClass: "category-actinide"},
  "Am": {Z:95, name:"Americio", mass:243.0, category:"Act√≠nido", config:"[Rn] 5f‚Å∑ 7s¬≤", categoryClass: "category-actinide"},
  "Cm": {Z:96, name:"Curio", mass:247.0, category:"Act√≠nido", config:"[Rn] 5f‚Å∑ 6d¬π 7s¬≤", categoryClass: "category-actinide"},
  "Bk": {Z:97, name:"Berkelio", mass:247.0, category:"Act√≠nido", config:"[Rn] 5f‚Åπ 7s¬≤", categoryClass: "category-actinide"},
  "Cf": {Z:98, name:"Californio", mass:251.0, category:"Act√≠nido", config:"[Rn] 5f¬π‚Å∞ 7s¬≤", categoryClass: "category-actinide"},
  "Es": {Z:99, name:"Einstenio", mass:252.0, category:"Act√≠nido", config:"[Rn] 5f¬π¬π 7s¬≤", categoryClass: "category-actinide"},
  "Fm": {Z:100, name:"Fermio", mass:257.0, category:"Act√≠nido", config:"[Rn] 5f¬π¬≤ 7s¬≤", categoryClass: "category-actinide"},
  "Md": {Z:101, name:"Mendelevio", mass:258.0, category:"Act√≠nido", config:"[Rn] 5f¬π¬≥ 7s¬≤", categoryClass: "category-actinide"},
  "No": {Z:102, name:"Nobelio", mass:259.0, category:"Act√≠nido", config:"[Rn] 5f¬π‚Å¥ 7s¬≤", categoryClass: "category-actinide"},
  "Lr": {Z:103, name:"Laurencio", mass:262.0, category:"Act√≠nido", config:"[Rn] 5f¬π‚Å¥ 7s¬≤ 7p¬π", categoryClass: "category-actinide"},
  "Rf": {Z:104, name:"Rutherfordio", mass:267.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d¬≤ 7s¬≤", categoryClass: "category-transition-metal"},
  "Db": {Z:105, name:"Dubnio", mass:268.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d¬≥ 7s¬≤", categoryClass: "category-transition-metal"},
  "Sg": {Z:106, name:"Seaborgio", mass:269.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d‚Å¥ 7s¬≤", categoryClass: "category-transition-metal"},
  "Bh": {Z:107, name:"Bohrio", mass:270.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d‚Åµ 7s¬≤", categoryClass: "category-transition-metal"},
  "Hs": {Z:108, name:"Hassio", mass:277.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d‚Å∂ 7s¬≤", categoryClass: "category-transition-metal"},
  "Mt": {Z:109, name:"Meitnerio", mass:278.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d‚Å∑ 7s¬≤", categoryClass: "category-transition-metal"},
  "Ds": {Z:110, name:"Darmstatio", mass:281.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d‚Åπ 7s¬π", categoryClass: "category-transition-metal"},
  "Rg": {Z:111, name:"Roentgenio", mass:282.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬π", categoryClass: "category-transition-metal"},
  "Cn": {Z:112, name:"Copernicio", mass:285.0, category:"Metal de transici√≥n", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤", categoryClass: "category-transition-metal"},
  "Nh": {Z:113, name:"Nihonio", mass:286.0, category:"Metal", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p¬π", categoryClass: "category-metal"},
  "Fl": {Z:114, name:"Flerovio", mass:289.0, category:"Metal", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p¬≤", categoryClass: "category-metal"},
  "Mc": {Z:115, name:"Moscovio", mass:290.0, category:"Metal", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p¬≥", categoryClass: "category-metal"},
  "Lv": {Z:116, name:"Livermorio", mass:293.0, category:"Metal", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p‚Å¥", categoryClass: "category-metal"},
  "Ts": {Z:117, name:"Teneso", mass:294.0, category:"Hal√≥geno", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p‚Åµ", categoryClass: "category-halogen"},
  "Og": {Z:118, name:"Oganes√≥n", mass:294.0, category:"Gas noble", config:"[Rn] 5f¬π‚Å¥ 6d¬π‚Å∞ 7s¬≤ 7p‚Å∂", categoryClass: "category-noble-gas"}
};

const aufbauOrder = [
  {orbital: "1s", n:1, l:0}, {orbital: "2s", n:2, l:0}, {orbital: "2p", n:2, l:1},
  {orbital: "3s", n:3, l:0}, {orbital: "3p", n:3, l:1}, {orbital: "4s", n:4, l:0},
  {orbital: "3d", n:3, l:2}, {orbital: "4p", n:4, l:1}, {orbital: "5s", n:5, l:0},
  {orbital: "4d", n:4, l:2}, {orbital: "5p", n:5, l:1}, {orbital: "6s", n:6, l:0},
  {orbital: "4f", n:4, l:3}, {orbital: "5d", n:5, l:2}, {orbital: "6p", n:6, l:1},
  {orbital: "7s", n:7, l:0}, {orbital: "5f", n:5, l:3}, {orbital: "6d", n:6, l:2},
  {orbital: "7p", n:7, l:1}
];

const orbitalCapacity = { "s":2, "p":6, "d":10, "f":14 };

const elementSelect = document.getElementById('elementSelect');
const atomicNumberSlider = document.getElementById('atomicNumberSlider');
const atomicNumberDisplay = document.getElementById('atomicNumberDisplay');
const configOutput = document.getElementById('configurationOutput');
const diagram = document.getElementById('orbitalDiagram');
const elementProperties = document.getElementById('elementProperties');

// Llenar select con elementos
Object.keys(elements).forEach(sym => {
  const option = document.createElement('option');
  option.value = sym;
  option.textContent = `${sym} - ${elements[sym].name} (${elements[sym].Z} e‚Åª)`;
  elementSelect.appendChild(option);
});

// Funci√≥n para generar configuraci√≥n electr√≥nica
function generateConfiguration(electrons) {
  let remaining = electrons;
  const config = [];
  aufbauOrder.forEach(o => {
    const type = o.orbital[1];
    const cap = orbitalCapacity[type];
    const eCount = Math.min(remaining, cap);
    if(eCount > 0){
      config.push({
        orbital: o.orbital, 
        electrons: eCount, 
        n: o.n, 
        l: o.l, 
        capacity: cap
      });
      remaining -= eCount;
    }
  });
  return config;
}

// Funci√≥n para mostrar diagrama de orbitales
function displayDiagram(config) {
  diagram.innerHTML = '';
  config.forEach(o => {
    const div = document.createElement('div');
    div.classList.add('orbital');

    // Nombre del orbital
    const orbitalLabel = document.createElement('div');
    orbitalLabel.classList.add('orbital-label');
    orbitalLabel.textContent = o.orbital;
    div.appendChild(orbitalLabel);

    // N√∫meros cu√°nticos
    const quantumSpan = document.createElement('div');
    quantumSpan.classList.add('quantum-numbers');
    quantumSpan.textContent = `n=${o.n}, l=${o.l}`;
    div.appendChild(quantumSpan);

    // Barra de orbital
    const barContainer = document.createElement('div');
    barContainer.classList.add('orbital-bar');
    
    const fillDiv = document.createElement('div');
    fillDiv.classList.add('orbital-fill');

    const percent = (o.electrons / o.capacity) * 100;
    
    if (percent === 0) {
      fillDiv.style.background = '#e0e0e0';            // vac√≠o (gris claro)
    }
    else if (percent < 100) {
      fillDiv.style.background = '#8a2be2'; // medio (violeta)
    }
    else {
      fillDiv.style.background = '#1a237e'; // completo (morado)
    }
    
    fillDiv.style.width = `${percent}%`;
    barContainer.appendChild(fillDiv);
    div.appendChild(barContainer);
    
    // N√∫mero de electrones debajo de la barra
    const countDiv = document.createElement('div');
    countDiv.classList.add('orbital-count');
    countDiv.textContent = `${o.electrons}/${o.capacity}`;
    div.appendChild(countDiv);

    diagram.appendChild(div);
  });
}

// Funci√≥n para mostrar informaci√≥n del elemento
function displayElementInfo(symbol) {
  const element = elements[symbol];
  const categorySpan = `<span class="element-category ${element.categoryClass}">${element.category}</span>`;
  
  elementProperties.innerHTML = `
    <div class="property">
      <div class="property-name">Nombre</div>
      <div class="property-value">${element.name}</div>
    </div>
    <div class="property">
      <div class="property-name">S√≠mbolo</div>
      <div class="property-value">${symbol}</div>
    </div>
    <div class="property">
      <div class="property-name">N√∫mero at√≥mico</div>
      <div class="property-value">${element.Z}</div>
    </div>
    <div class="property">
      <div class="property-name">Masa at√≥mica</div>
      <div class="property-value">${element.mass} u</div>
    </div>
    <div class="property">
      <div class="property-name">Categor√≠a</div>
      <div class="property-value">${categorySpan}</div>
    </div>
    <div class="property">
      <div class="property-name">Configuraci√≥n</div>
      <div class="property-value">${element.config}</div>
    </div>
  `;
}

// Funci√≥n para convertir n√∫meros a super√≠ndices (soluci√≥n mejorada)
function toSuperscript(number) {
  // Usar una soluci√≥n m√°s robusta para m√≥viles
  const superscriptMap = {
    '0': '‚Å∞',
    '1': '¬π',
    '2': '¬≤',
    '3': '¬≥',
    '4': '‚Å¥',
    '5': '‚Åµ',
    '6': '‚Å∂',
    '7': '‚Å∑',
    '8': '‚Å∏',
    '9': '‚Åπ'
  };
  
  return number.toString().split('').map(digit => {
    return superscriptMap[digit] || digit;
  }).join('');
}

// Soluci√≥n alternativa para navegadores m√≥viles
function createConfigHTML(config) {
  let html = '<div class="config-text">';
  
  config.forEach(c => {
    html += `${c.orbital}<span class="config-sup">${c.electrons}</span> `;
  });
  
  html += '</div>';
  return html;
}

// Event listeners
elementSelect.addEventListener('change', () => {
  const el = elementSelect.value;
  if(el && elements[el]){
    const config = generateConfiguration(elements[el].Z);
    
    // Detectar si es un dispositivo m√≥vil
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    
    if (isMobile) {
      // Usar soluci√≥n alternativa para m√≥viles
      configOutput.innerHTML = createConfigHTML(config);
    } else {
      // Usar super√≠ndices Unicode para escritorio
      const configText = config.map(c => {
        return `${c.orbital}${toSuperscript(c.electrons)}`;
      }).join(' ');
      
      configOutput.innerHTML = `<div class="config-text">${configText}</div>`;
    }
    
    displayDiagram(config);
    displayElementInfo(el);
    atomicNumberSlider.value = elements[el].Z;
    atomicNumberDisplay.textContent = `N√∫mero at√≥mico: ${elements[el].Z}`;
  } else {
    configOutput.textContent = "Aqu√≠ aparecer√° la configuraci√≥n electr√≥nica.";
    diagram.innerHTML = '';
    elementProperties.innerHTML = '';
  }
});

atomicNumberSlider.addEventListener('input', () => {
  const z = parseInt(atomicNumberSlider.value);
  atomicNumberDisplay.textContent = `N√∫mero at√≥mico: ${z}`;
  
  // Encontrar el elemento con este n√∫mero at√≥mico
  for (const symbol in elements) {
    if (elements[symbol].Z === z) {
      elementSelect.value = symbol;
      const event = new Event('change');
      elementSelect.dispatchEvent(event);
      break;
    }
  }
});

// Inicializar con el primer elemento
elementSelect.value = "H";
const event = new Event('change');
elementSelect.dispatchEvent(event);
</script>

</body>
</html>
